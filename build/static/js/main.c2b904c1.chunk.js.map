{"version":3,"sources":["AddCloth.js","Header.js","Shop.js","App.js","index.js"],"names":["AddCloth","props","useState","name","setName","image","setImage","description","setDescription","price","setPrice","isUsed","setIsUsed","className","onSubmit","e","preventDefault","console","log","addCloth","onChange","target","value","type","placeholder","text","style","marginLeft","disabled","id","marginTop","Header","href","src","alt","balance","Shop","buyCloth","index","clothes","map","cloth","onClick","contractAddress","App","contract","setcontract","address","setAddress","kit","setKit","cUSDBalance","setcUSDBalance","setClothes","connectCeloWallet","a","window","celo","enable","web3","Web3","newKitFromWeb3","eth","getAccounts","accounts","user_address","defaultAccount","error","getBalance","getTotalBalance","USDBalance","cUSD","shiftedBy","toFixed","Contract","wear","useEffect","getClothes","methods","getClothLength","call","clothLength","_cloths","_cloth","Promise","resolve","reject","getCloth","c","owner","push","all","cloths","_index","_price","cUSDContract","erc20","cost","BigNumber","toString","approve","send","from","_name","_description","_image","_isUsed","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c2b904c1.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst AddCloth = (props) => {\r\n  const [name, setName] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [price, setPrice] = useState(0);\r\n  const [isUsed, setIsUsed] = useState(false);\r\n\r\n  const convertToBool = (text) => {\r\n    if (text === \"true\") {\r\n      return true;\r\n    } else if (text === \"false\") {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const formSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(isUsed);\r\n    props.addCloth(name, description, image, price, isUsed);\r\n    setName(\"\");\r\n    setImage(\"\");\r\n    setPrice(\"\");\r\n    setDescription(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"newsletter\">\r\n      <div className=\"container\">\r\n        <h1>Add Cloth</h1>\r\n        <div className=\"row\">\r\n          <div className=\" col-12\">\r\n            <form className=\"form_newsletter\" onSubmit={formSubmit}>\r\n              <input\r\n                onChange={(e) => setName(e.target.value)}\r\n                type=\"text\"\r\n                placeholder=\"Name\"\r\n                className=\"newsletter-input form-control\"\r\n                value={name}\r\n              />\r\n              <input\r\n                onChange={(e) => setDescription(e.target.value)}\r\n                type=\"text\"\r\n                placeholder=\"Description\"\r\n                className=\"newsletter-input form-control\"\r\n                value={description}\r\n              />\r\n              <input\r\n                onChange={(e) => setImage(e.target.value)}\r\n                type=\"text\"\r\n                placeholder=\"Image Link\"\r\n                className=\"newsletter-input form-control\"\r\n                value={image}\r\n              />\r\n              <input\r\n                onChange={(e) => setPrice(e.target.value)}\r\n                type=\"text\"\r\n                placeholder=\"Price\"\r\n                className=\"newsletter-input form-control\"\r\n                value={price}\r\n              />\r\n              <select\r\n                onChange={(e) => setIsUsed(convertToBool(e.target.value))}\r\n                className=\"newsletter-input form-control\"\r\n                style={{ marginLeft: \"15px\" }}\r\n              >\r\n                <option value=\"\" disabled>\r\n                  Check Is Used\r\n                </option>\r\n                <option value=\"true\">Used</option>\r\n                <option value=\"false\">New</option>\r\n              </select>\r\n              <button\r\n                id=\"\"\r\n                className=\"button_mini zoa-btn\"\r\n                type=\"submit\"\r\n                style={{ marginLeft: \"15px\", marginTop: \"12px\" }}\r\n              >\r\n                Add Products\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddCloth;\r\n","const Header = (props) => {\r\n  return (\r\n    <header id=\"header\" className=\"header-v1\">\r\n      <div className=\"header-center\">\r\n        <div className=\"container container-content\">\r\n          <div className=\"row flex align-items-center justify-content-between\">\r\n            <div className=\" flex justify-content-center\">\r\n              <a href=\"#\">\r\n                <img src=\"img/logo.png\" alt=\"\" className=\"img-reponsive\" />\r\n              </a>\r\n            </div>\r\n            <div className=\"col-md-4 col flex justify-content-end\">\r\n                <h3>${props.balance}cUSD</h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nconst Shop = (props) => {\r\n  const buyCloth = (index, price)=>{\r\n    props.buyCloth(index, price)\r\n  }\r\n  return (\r\n    <div className=\"container container-content\">\r\n      <div className=\"product-collection-grid product-grid bd-bottom\">\r\n        <div className=\"row engoc-row-equal\">\r\n          {props.clothes.map((cloth) => (\r\n            <div className=\"col-xs-6 col-sm-4 col-md-2 col-lg-2 product-item\">\r\n              <div className=\"product-img\">\r\n                <a href>\r\n                  <img\r\n                    src={cloth.image}\r\n                    alt=\"\"\r\n                    className=\"img-responsive\"\r\n                  />\r\n                </a>\r\n                <div className=\"ribbon zoa-hot\">\r\n                  <span>{cloth.isUsed ? \"Used\" : \"New\"}</span>\r\n                </div>\r\n                <div className=\"product-button-group\">\r\n                 \r\n                  <a href=\"#\" onClick = {()=>buyCloth(cloth.index)} className=\"zoa-btn zoa-addcart\">\r\n                    <span className=\"zoa-icon-cart\" />\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div className=\"product-info text-center\">\r\n                <h3 className=\"product-title\">\r\n                  <a href>{cloth.name}</a>\r\n                </h3>\r\n                <div className=\"short-desc\">\r\n                  <p>\r\n                    {cloth.description}\r\n                  </p>\r\n                </div>\r\n                <div className=\"product-price\">\r\n                  <span>${cloth.price/1000000000000000000}</span>\r\n                </div>\r\n                <button\r\n                onClick = {()=>buyCloth(cloth.index, cloth.price)}\r\n                id=\"\"\r\n                className=\"button_mini zoa-btn\"\r\n                type=\"submit\"\r\n                style = {{\"marginLeft\": \"15px\", \"marginTop\": \"12px\"}}\r\n              >\r\n                Buy Cloth\r\n              </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n","import React, { useState, useEffect } from \"react\";\nimport { Fragment } from \"react\";\nimport AddCloth from \"./AddCloth\";\nimport Header from \"./Header\";\nimport Shop from \"./Shop\";\n\nimport Web3 from \"web3\";\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\nimport BigNumber from \"bignumber.js\";\n\nimport wear from \"./contracts/wear.abi.json\";\nimport erc20 from \"./contracts/IERC.abi.json\";\n\nconst ERC20_DECIMALS = 18;\n\nconst contractAddress = \"0x46178FeB4e08589978a0e1c440fBB0A0A8EB2A64\";\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\n\nfunction App() {\n  const [contract, setcontract] = useState(null);\n  const [address, setAddress] = useState(null);\n  const [kit, setKit] = useState(null);\n  const [cUSDBalance, setcUSDBalance] = useState(0);\n  const [clothes, setClothes] = useState([])\n\n  const connectCeloWallet = async () => {\n    if (window.celo) {\n      // notification(\"⚠️ Please approve this DApp to use it.\")\n      try {\n        await window.celo.enable();\n        // notificationOff()\n        const web3 = new Web3(window.celo);\n        let kit = newKitFromWeb3(web3);\n\n        const accounts = await kit.web3.eth.getAccounts();\n        const user_address = accounts[0];\n\n        kit.defaultAccount = user_address;\n\n        await setAddress(user_address);\n\n        await setKit(kit);\n      } catch (error) {\n        console.log(\"There is an error\");\n        console.log({ error });\n        // notification(`⚠️ ${error}.`)\n      }\n    } else {\n      console.log(\"please install the extension\");\n      // notification(\"⚠️ Please install the CeloExtensionWallet.\")\n    }\n  };\n\n  const getBalance = async () => {\n    const balance = await kit.getTotalBalance(address);\n    const USDBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\n\n    const contract = new kit.web3.eth.Contract(wear, contractAddress);\n    setcontract(contract);\n    setcUSDBalance(USDBalance);\n  };\n\n  useEffect(() => {\n    connectCeloWallet();\n  }, []);\n\n  useEffect(() => {\n    if (kit && address) {\n      return getBalance();\n    } else {\n      console.log(\"no kit or address\");\n    }\n  }, [kit, address]);\n\n  useEffect(() => {\n    if (contract) {\n      getClothes();\n    }\n  }, [contract]);\n\n\n  const getClothes = async function () {\n    const clothLength = await contract.methods.getClothLength().call();\n    const _cloths = [];\n\n    for (let index = 0; index < clothLength; index++) {\n      let _cloth = new Promise(async (resolve, reject) => {\n        let c = await contract.methods.getCloth(index).call();\n        resolve({\n          index: index,\n          owner: c[0],\n          name: c[1],\n          description: c[2],\n          image: c[3],\n          price: c[4],\n          isUsed: c[5],\n        });\n      });\n\n      _cloths.push(_cloth);\n    }\n    const cloths = await Promise.all(_cloths);\n\n    setClothes(cloths);\n\n  };\n\n  const buyCloth = async (_index, _price)=>{\n    try {\n      const cUSDContract = new kit.web3.eth.Contract(erc20, cUSDContractAddress);\n      const cost = new BigNumber(_price).shiftedBy(ERC20_DECIMALS).toString();\n\n      await cUSDContract.methods\n        .approve(contractAddress, cost)\n        .send({ from: address });\n\n      await contract.methods.buyCloth(_index).send({ from: address });\n      // return result\n      getBalance();\n      getClothes();\n    } catch (error) {\n      console.log({ error });\n    }\n  }\n  const addCloth = async (_name, _description, _image, _price, _isUsed) => {\n    try {\n      const price = new BigNumber(_price)\n        .shiftedBy(ERC20_DECIMALS).toString();\n\n\n      await contract.methods\n        .addCloth(\n          _name,\n          _description,\n          _image,\n          price,\n          _isUsed, \n          \n        )\n        .send({ from: address });\n      getClothes();\n    } catch (error) {\n      console.log(error);\n    }\n\n  }\n  return (\n    <Fragment>\n      <Header balance={cUSDBalance} />\n      <Shop clothes = {clothes} buyCloth = {buyCloth}/>\n      <AddCloth addCloth = {addCloth}/>\n    </Fragment>\n  );\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}